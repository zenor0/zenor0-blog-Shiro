import{r,R as T}from"./index-jAOdAlND.js";const w=["light","dark"],x="(prefers-color-scheme: dark)",N=typeof window>"u",L=r.createContext(void 0),j={setTheme:e=>{},themes:[]},J=()=>{var e;return(e=r.useContext(L))!==null&&e!==void 0?e:j},H=e=>r.useContext(L)?T.createElement(r.Fragment,null,e.children):T.createElement(_,e),R=["light","dark"],_=({forcedTheme:e,disableTransitionOnChange:m=!1,enableSystem:t=!0,enableColorScheme:$=!0,storageKey:d="theme",themes:o=R,defaultTheme:n=t?"system":"light",attribute:v="data-theme",value:h,children:b,nonce:S})=>{const[c,i]=r.useState(()=>M(d,n)),[p,l]=r.useState(()=>M(d)),f=h?Object.values(h):o,k=r.useCallback(s=>{let a=s;if(!a)return;s==="system"&&t&&(a=O());const C=h?h[a]:a,I=m?D():null,E=document.documentElement;if(v==="class"?(E.classList.remove(...f),C&&E.classList.add(C)):C?E.setAttribute(v,C):E.removeAttribute(v),$){const A=w.includes(n)?n:null,K=w.includes(a)?a:A;E.style.colorScheme=K}I?.()},[]),u=r.useCallback(s=>{i(s);try{localStorage.setItem(d,s)}catch{}},[e]),y=r.useCallback(s=>{const a=O(s);l(a),c==="system"&&t&&!e&&k("system")},[c,e]);r.useEffect(()=>{const s=window.matchMedia(x);return s.addListener(y),y(s),()=>s.removeListener(y)},[y]),r.useEffect(()=>{const s=a=>{a.key===d&&u(a.newValue||n)};return window.addEventListener("storage",s),()=>window.removeEventListener("storage",s)},[u]),r.useEffect(()=>{k(e??c)},[e,c]);const g=r.useMemo(()=>({theme:c,setTheme:u,forcedTheme:e,resolvedTheme:c==="system"?p:c,themes:t?[...o,"system"]:o,systemTheme:t?p:void 0}),[c,u,e,p,t,o]);return T.createElement(L.Provider,{value:g},T.createElement(z,{forcedTheme:e,disableTransitionOnChange:m,enableSystem:t,enableColorScheme:$,storageKey:d,themes:o,defaultTheme:n,attribute:v,value:h,children:b,attrs:f,nonce:S}),b)},z=r.memo(({forcedTheme:e,storageKey:m,attribute:t,enableSystem:$,enableColorScheme:d,defaultTheme:o,value:n,attrs:v,nonce:h})=>{const b=o==="system",S=t==="class"?`var d=document.documentElement,c=d.classList;c.remove(${v.map(l=>`'${l}'`).join(",")});`:`var d=document.documentElement,n='${t}',s='setAttribute';`,c=d?w.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",i=(l,f=!1,k=!0)=>{const u=n?n[l]:l,y=f?l+"|| ''":`'${u}'`;let g="";return d&&k&&!f&&w.includes(l)&&(g+=`d.style.colorScheme = '${l}';`),t==="class"?g+=f||u?`c.add(${y})`:"null":u&&(g+=`d[s](n,${y})`),g},p=e?`!function(){${S}${i(e)}}()`:$?`!function(){try{${S}var e=localStorage.getItem('${m}');if('system'===e||(!e&&${b})){var t='${x}',m=window.matchMedia(t);if(m.media!==t||m.matches){${i("dark")}}else{${i("light")}}}else if(e){${n?`var x=${JSON.stringify(n)};`:""}${i(n?"x[e]":"e",!0)}}${b?"":"else{"+i(o,!1,!1)+"}"}${c}}catch(e){}}()`:`!function(){try{${S}var e=localStorage.getItem('${m}');if(e){${n?`var x=${JSON.stringify(n)};`:""}${i(n?"x[e]":"e",!0)}}else{${i(o,!1,!1)};}${c}}catch(t){}}();`;return T.createElement("script",{nonce:h,dangerouslySetInnerHTML:{__html:p}})},()=>!0),M=(e,m)=>{if(N)return;let t;try{t=localStorage.getItem(e)||void 0}catch{}return t||m},D=()=>{const e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},O=e=>(e||(e=window.matchMedia(x)),e.matches?"dark":"light"),P=()=>{const{theme:e,systemTheme:m}=J();return e==="dark"||e==="system"&&m==="dark"};export{H as $,P as u};
